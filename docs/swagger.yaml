basePath: /api/v1
definitions:
  domain.AppInfo:
    properties:
      environment:
        type: string
      name:
        type: string
      start_time:
        type: string
      status:
        type: string
      uptime:
        type: string
      version:
        type: string
    type: object
  domain.ApplicationStatus:
    properties:
      app:
        $ref: '#/definitions/domain.AppInfo'
      dependencies:
        items:
          $ref: '#/definitions/domain.Dependency'
        type: array
      services:
        $ref: '#/definitions/domain.ServicesStatus'
    type: object
  domain.AuthRequest:
    properties:
      email:
        type: string
      password:
        minLength: 8
        type: string
    required:
    - email
    - password
    type: object
  domain.AuthResponse:
    properties:
      access_token:
        type: string
      expires_at:
        type: integer
      expires_in:
        type: integer
      token_type:
        type: string
      user:
        $ref: '#/definitions/domain.AuthUserResponse'
    type: object
  domain.AuthUserResponse:
    properties:
      created_at:
        type: string
      email:
        type: string
      id:
        type: string
      name:
        type: string
      role:
        type: string
    type: object
  domain.BasicHealthCheck:
    properties:
      app:
        type: string
      status:
        $ref: '#/definitions/domain.HealthStatus'
      timestamp:
        type: string
    type: object
  domain.CPUInfo:
    properties:
      cores:
        type: integer
      goroutines:
        type: integer
    type: object
  domain.ComprehensiveHealthCheck:
    properties:
      app:
        $ref: '#/definitions/domain.AppInfo'
      database:
        $ref: '#/definitions/domain.DatabaseStatus'
      status:
        $ref: '#/definitions/domain.HealthStatus'
      system:
        $ref: '#/definitions/domain.SystemInfo'
      timestamp:
        type: string
    type: object
  domain.DatabaseService:
    properties:
      name:
        type: string
      ping_time:
        type: string
      status:
        $ref: '#/definitions/domain.ServiceStatus'
      version:
        type: string
    type: object
  domain.DatabaseStatus:
    properties:
      error:
        type: string
      idle_connections:
        type: integer
      max_connections:
        type: integer
      name:
        type: string
      open_connections:
        type: integer
      ping_time:
        type: string
      status:
        $ref: '#/definitions/domain.ServiceStatus'
      total_queries:
        type: integer
      version:
        type: string
    type: object
  domain.Dependency:
    properties:
      name:
        type: string
      status:
        $ref: '#/definitions/domain.ServiceStatus'
      version:
        type: string
    type: object
  domain.DetailedSystemInfo:
    properties:
      cpu:
        $ref: '#/definitions/domain.CPUInfo'
      memory:
        $ref: '#/definitions/domain.MemoryInfo'
      runtime:
        $ref: '#/definitions/domain.RuntimeInfo'
    type: object
  domain.DownloadUserFilesRequest:
    properties:
      modul_ids:
        items:
          type: integer
        type: array
      project_ids:
        items:
          type: integer
        type: array
    type: object
  domain.EmailService:
    properties:
      api_key_set:
        type: boolean
      name:
        type: string
      provider:
        type: string
      status:
        $ref: '#/definitions/domain.ServiceStatus'
    type: object
  domain.ErrorResponse:
    properties:
      code:
        type: integer
      errors: {}
      message:
        type: string
      success:
        type: boolean
      timestamp:
        type: string
    type: object
  domain.HealthStatus:
    enum:
    - healthy
    - unhealthy
    - degraded
    type: string
    x-enum-varnames:
    - HealthStatusHealthy
    - HealthStatusUnhealthy
    - HealthStatusDegraded
  domain.HttpMetrics:
    properties:
      active_requests:
        type: integer
      response_times:
        $ref: '#/definitions/domain.ResponseTimes'
      total_requests:
        type: integer
    type: object
  domain.MemoryInfo:
    properties:
      allocated:
        type: string
      gc_count:
        type: integer
      system:
        type: string
      total_allocated:
        type: string
    type: object
  domain.ModulDownloadRequest:
    properties:
      ids:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - ids
    type: object
  domain.ModulListData:
    properties:
      items:
        items:
          $ref: '#/definitions/domain.ModulListItem'
        type: array
      pagination:
        $ref: '#/definitions/domain.PaginationData'
    type: object
  domain.ModulListItem:
    properties:
      deskripsi:
        type: string
      file_name:
        type: string
      file_path:
        type: string
      file_size:
        type: integer
      id:
        type: string
      judul:
        type: string
      mime_type:
        type: string
      status:
        type: string
      terakhir_diperbarui:
        type: string
    type: object
  domain.ModulUpdateRequest:
    properties:
      deskripsi:
        type: string
      judul:
        maxLength: 255
        minLength: 3
        type: string
    type: object
  domain.PaginationData:
    properties:
      limit:
        type: integer
      page:
        type: integer
      total_items:
        type: integer
      total_pages:
        type: integer
    type: object
  domain.ProfileData:
    properties:
      created_at:
        type: string
      email:
        type: string
      foto_profil:
        type: string
      jenis_kelamin:
        type: string
      jumlah_modul:
        type: integer
      jumlah_project:
        type: integer
      name:
        type: string
      role:
        type: string
    type: object
  domain.ProjectDownloadRequest:
    properties:
      ids:
        items:
          type: integer
        minItems: 1
        type: array
    required:
    - ids
    type: object
  domain.ProjectUpdateRequest:
    properties:
      kategori:
        enum:
        - website
        - mobile
        - iot
        - machine_learning
        - deep_learning
        type: string
      nama_project:
        maxLength: 255
        minLength: 3
        type: string
      semester:
        maximum: 8
        minimum: 1
        type: integer
    type: object
  domain.RefreshTokenResponse:
    properties:
      access_token:
        type: string
      expires_at:
        type: integer
      expires_in:
        type: integer
      token_type:
        type: string
    type: object
  domain.RegisterRequest:
    properties:
      email:
        type: string
      name:
        maxLength: 100
        minLength: 2
        type: string
      password:
        minLength: 8
        type: string
    required:
    - email
    - name
    - password
    type: object
  domain.ResetPasswordRequest:
    properties:
      email:
        type: string
    required:
    - email
    type: object
  domain.ResponseTimes:
    properties:
      avg:
        type: string
      max:
        type: string
      min:
        type: string
    type: object
  domain.RoleCreateRequest:
    properties:
      nama_role:
        maxLength: 50
        minLength: 2
        type: string
      permissions:
        additionalProperties:
          items:
            type: string
          type: array
        type: object
    required:
    - nama_role
    - permissions
    type: object
  domain.RoleUpdateRequest:
    properties:
      nama_role:
        maxLength: 50
        minLength: 2
        type: string
      permissions:
        additionalProperties:
          items:
            type: string
          type: array
        type: object
    required:
    - nama_role
    - permissions
    type: object
  domain.RuntimeInfo:
    properties:
      arch:
        type: string
      compiler:
        type: string
      go_version:
        type: string
      os:
        type: string
    type: object
  domain.ServiceStatus:
    enum:
    - healthy
    - unhealthy
    - connected
    - disconnected
    - error
    - loaded
    - running
    type: string
    x-enum-varnames:
    - ServiceStatusHealthy
    - ServiceStatusUnhealthy
    - ServiceStatusConnected
    - ServiceStatusDisconnected
    - ServiceStatusError
    - ServiceStatusLoaded
    - ServiceStatusRunning
  domain.ServicesStatus:
    properties:
      database:
        $ref: '#/definitions/domain.DatabaseService'
      email:
        $ref: '#/definitions/domain.EmailService'
    type: object
  domain.StatisticData:
    properties:
      total_modul:
        type: integer
      total_project:
        type: integer
      total_role:
        type: integer
      total_user:
        type: integer
    type: object
  domain.SuccessResponse:
    properties:
      code:
        type: integer
      data: {}
      message:
        type: string
      success:
        type: boolean
      timestamp:
        type: string
    type: object
  domain.SystemInfo:
    properties:
      cpu_cores:
        type: integer
      goroutines:
        type: integer
      memory_usage:
        type: string
    type: object
  domain.SystemMetrics:
    properties:
      app:
        $ref: '#/definitions/domain.AppInfo'
      database:
        $ref: '#/definitions/domain.DatabaseStatus'
      http:
        $ref: '#/definitions/domain.HttpMetrics'
      system:
        $ref: '#/definitions/domain.DetailedSystemInfo'
    type: object
  domain.UpdateProfileRequest:
    properties:
      jenis_kelamin:
        enum:
        - Laki-laki
        - Perempuan
        type: string
      name:
        maxLength: 100
        minLength: 2
        type: string
    required:
    - name
    type: object
  domain.UpdateUserRoleRequest:
    properties:
      role:
        type: string
    required:
    - role
    type: object
  domain.UserFileItem:
    properties:
      download_url:
        type: string
      id:
        type: string
      kategori:
        type: string
      nama_file:
        type: string
    type: object
  domain.UserFilesData:
    properties:
      items:
        items:
          $ref: '#/definitions/domain.UserFileItem'
        type: array
      pagination:
        $ref: '#/definitions/domain.PaginationData'
    type: object
  domain.UserListData:
    properties:
      items:
        items:
          $ref: '#/definitions/domain.UserListItem'
        type: array
      pagination:
        $ref: '#/definitions/domain.PaginationData'
    type: object
  domain.UserListItem:
    properties:
      dibuat_pada:
        type: string
      email:
        type: string
      id:
        type: string
      role:
        type: string
    type: object
  domain.UserPermissionItem:
    properties:
      actions:
        items:
          type: string
        type: array
      resource:
        type: string
    type: object
host: localhost:3000
info:
  contact: {}
  description: REST API service for managing projects, modules, users, and file uploads
    with JWT authentication and RBAC.
  title: Invento Service API
  version: "1.0"
paths:
  /api/v1/auth/login:
    post:
      consumes:
      - application/json
      description: Autentikasi pengguna melalui Supabase Auth dengan email dan password.
        Data profil lokal disinkronkan jika diperlukan.
      parameters:
      - description: Credential login (email, password)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.AuthRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Login berhasil
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.AuthResponse'
              type: object
        "400":
          description: Format request tidak valid
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Email atau password salah
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Akun belum diaktifkan
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Terjadi kesalahan pada server
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      summary: Login pengguna
      tags:
      - Auth
  /api/v1/auth/logout:
    post:
      consumes:
      - application/json
      description: Menghapus refresh token dari cookie dan database.
      produces:
      - application/json
      responses:
        "200":
          description: Logout berhasil
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Refresh token diperlukan
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Token tidak valid
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Terjadi kesalahan pada server
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Logout pengguna
      tags:
      - Auth
  /api/v1/auth/refresh:
    post:
      consumes:
      - application/json
      description: Memperbarui access token menggunakan refresh token dari cookie.
      produces:
      - application/json
      responses:
        "200":
          description: Token berhasil diperbarui
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.RefreshTokenResponse'
              type: object
        "400":
          description: Refresh token diperlukan
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Token tidak valid atau expired
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Terjadi kesalahan pada server
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      summary: Refresh access token
      tags:
      - Auth
  /api/v1/auth/register:
    post:
      consumes:
      - application/json
      description: Membuat akun pengguna baru melalui Supabase Auth dan menyimpan
        data profil ke database lokal.
      parameters:
      - description: Data registrasi (name, email, password)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Registrasi berhasil
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.AuthResponse'
              type: object
        "400":
          description: Data validasi tidak valid
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Email sudah terdaftar
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Terjadi kesalahan pada server
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      summary: Registrasi pengguna baru
      tags:
      - Auth
  /api/v1/auth/reset-password:
    post:
      consumes:
      - application/json
      description: Mengirim link reset password ke email yang terdaftar melalui Supabase
        Auth.
      parameters:
      - description: Email untuk reset password
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Link reset password telah dikirim
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Format request tidak valid
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Email tidak ditemukan
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Terjadi kesalahan pada server
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      summary: Minta reset password
      tags:
      - Auth
  /api/v1/modul:
    get:
      consumes:
      - application/json
      description: Retrieve paginated list of modules with optional filters
      parameters:
      - description: Search by judul or deskripsi
        in: query
        name: search
        type: string
      - description: Filter by mime type
        in: query
        name: filter_type
        type: string
      - description: Filter by status (pending, completed)
        in: query
        name: filter_status
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Items per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List retrieved successfully
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.ModulListData'
              type: object
        "400":
          description: Invalid query parameters
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get list of modules
      tags:
      - Modul
  /api/v1/modul/{id}:
    delete:
      consumes:
      - application/json
      description: Permanently delete a module by ID
      parameters:
      - description: Module ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Module deleted successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid module ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden - no access to this module
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Module not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a module
      tags:
      - Modul
    patch:
      consumes:
      - application/json
      description: Update judul or deskripsi of an existing module
      parameters:
      - description: Module ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.ModulUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Metadata updated successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden - no access to this module
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Module not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update module metadata
      tags:
      - Modul
  /api/v1/modul/download:
    post:
      consumes:
      - application/json
      description: Download one or more modules as a ZIP file
      parameters:
      - description: Download request with module IDs
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.ModulDownloadRequest'
      produces:
      - application/zip
      responses:
        "200":
          description: ZIP file containing module files
          schema:
            type: file
        "400":
          description: Invalid request format or empty IDs
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: One or more modules not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Download modules as ZIP
      tags:
      - Modul
  /api/v1/monitoring/app-status:
    get:
      consumes:
      - application/json
      description: Mengambil status aplikasi lengkap termasuk uptime, layanan yang
        aktif, dan dependency eksternal.
      produces:
      - application/json
      responses:
        "200":
          description: Status aplikasi berhasil diambil
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.ApplicationStatus'
              type: object
      summary: Application Status
      tags:
      - Monitoring
  /api/v1/monitoring/metrics:
    get:
      consumes:
      - application/json
      description: Mengambil metrik sistem detail termasuk penggunaan memori, CPU,
        statistik database, dan metrik HTTP.
      produces:
      - application/json
      responses:
        "200":
          description: Metrics sistem berhasil diambil
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.SystemMetrics'
              type: object
      summary: System Metrics
      tags:
      - Monitoring
  /api/v1/monitoring/status:
    get:
      consumes:
      - application/json
      description: |-
        Melakukan pemeriksaan kesehatan menyeluruh termasuk koneksi database, penggunaan memori, CPU, dan lainnya.
        -
        Mengembalikan status HTTP 503 jika sistem tidak sehat (database terputus atau error).
      produces:
      - application/json
      responses:
        "200":
          description: Sistem sehat
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.ComprehensiveHealthCheck'
              type: object
        "503":
          description: Beberapa komponen sistem mengalami masalah
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      summary: Comprehensive Health Check
      tags:
      - Monitoring
  /api/v1/profile:
    get:
      consumes:
      - application/json
      description: Get the profile of the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.ProfileData'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user profile
      tags:
      - User Profile
    put:
      consumes:
      - application/json
      description: Update the profile of the authenticated user
      parameters:
      - description: Profile update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateProfileRequest'
      - description: Profile photo (optional)
        in: formData
        name: foto_profil
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.ProfileData'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user profile
      tags:
      - User Profile
  /api/v1/project:
    get:
      consumes:
      - application/json
      description: Retrieve paginated list of projects with optional filters
      parameters:
      - description: Search by project name
        in: query
        name: search
        type: string
      - description: Filter by semester (1-8)
        in: query
        name: filter_semester
        type: integer
      - description: Filter by category (website, mobile, iot, machine_learning, deep_learning)
        in: query
        name: filter_kategori
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Items per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List retrieved successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid query parameters
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get list of projects
      tags:
      - Project
  /api/v1/project/{id}:
    delete:
      consumes:
      - application/json
      description: Permanently delete a project by ID
      parameters:
      - description: Project ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Project deleted successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid project ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden - no access to this project
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Project not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a project
      tags:
      - Project
    get:
      consumes:
      - application/json
      description: Retrieve details of a specific project by ID
      parameters:
      - description: Project ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Project details retrieved successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid project ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden - no access to this project
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Project not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get project by ID
      tags:
      - Project
    patch:
      consumes:
      - application/json
      description: Update nama_project, kategori, or semester of an existing project
      parameters:
      - description: Project ID
        in: path
        name: id
        required: true
        type: integer
      - description: Update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.ProjectUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Metadata updated successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "403":
          description: Forbidden - no access to this project
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Project not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update project metadata
      tags:
      - Project
  /api/v1/project/download:
    post:
      consumes:
      - application/json
      description: Download one or more projects as a ZIP file
      parameters:
      - description: Download request with project IDs
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.ProjectDownloadRequest'
      produces:
      - application/zip
      responses:
        "200":
          description: ZIP file containing project files
          schema:
            type: file
        "400":
          description: Invalid request format or empty IDs
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: One or more projects not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Download projects as ZIP
      tags:
      - Project
  /api/v1/role:
    get:
      consumes:
      - application/json
      description: Retrieves a paginated list of roles with optional search
      parameters:
      - description: Search keyword
        in: query
        name: search
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Items per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Roles retrieved successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid query parameters
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get role list
      tags:
      - Roles
    post:
      consumes:
      - application/json
      description: Creates a new role with the specified name and permissions
      parameters:
      - description: Role creation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.RoleCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Role created successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Role name already exists
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create role
      tags:
      - Roles
  /api/v1/role/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes a role and removes all associated permissions
      parameters:
      - description: Role ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Role deleted successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid role ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Role not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete role
      tags:
      - Roles
    get:
      consumes:
      - application/json
      description: Retrieves detailed information about a specific role including
        its permissions
      parameters:
      - description: Role ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Role details retrieved successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid role ID
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Role not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get role detail
      tags:
      - Roles
    put:
      consumes:
      - application/json
      description: Updates an existing role's name and permissions
      parameters:
      - description: Role ID
        in: path
        name: id
        required: true
        type: integer
      - description: Role update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.RoleUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Role updated successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Role not found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "409":
          description: Role name already exists
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update role
      tags:
      - Roles
  /api/v1/role/permissions:
    get:
      consumes:
      - application/json
      description: Retrieves all available permissions grouped by resource
      produces:
      - application/json
      responses:
        "200":
          description: Permissions retrieved successfully
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get available permissions
      tags:
      - Roles
  /api/v1/statistic:
    get:
      consumes:
      - application/json
      description: |-
        Mengambil data statistik berdasarkan role dan permission user.
        -
        Data yang dikembalikan bersifat dinamis:
        - **Admin** mendapatkan semua statistik (project, modul, user, role)
        - **User biasa** hanya mendapatkan statistik yang mereka miliki aksesnya
        - Field yang tidak memiliki permission akan bernilai null/omit
        -
        **Permission Mapping:**
        - `total_project`: memerlukan permission "Project:read"
        - `total_modul`: memerlukan permission "Modul:read"
        - `total_user`: memerlukan permission "User:read"
        - `total_role`: memerlukan permission "Role:read"
      produces:
      - application/json
      responses:
        "200":
          description: Data statistik berhasil diambil (partial untuk user biasa)
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.StatisticData'
              type: object
        "401":
          description: Tidak memiliki akses
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Terjadi kesalahan pada server
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get User Statistics
      tags:
      - Statistics
  /api/v1/user:
    get:
      consumes:
      - application/json
      description: Get paginated list of users with optional search and filters
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Items per page
        in: query
        name: limit
        type: integer
      - description: Search keyword
        in: query
        name: search
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.UserListData'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get list of users
      tags:
      - User Management
  /api/v1/user/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a specific user by ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete user
      tags:
      - User Management
  /api/v1/user/{id}/download:
    post:
      consumes:
      - application/json
      description: Download files owned by a specific user
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: Download request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.DownloadUserFilesRequest'
      produces:
      - application/octet-stream
      responses:
        "200":
          description: OK
          schema:
            type: file
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Download user files
      tags:
      - User Management
  /api/v1/user/{id}/files:
    get:
      consumes:
      - application/json
      description: Get list of files owned by a specific user
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Items per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.UserFilesData'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user files
      tags:
      - User Management
  /api/v1/user/{id}/role:
    put:
      consumes:
      - application/json
      description: Update the role of a specific user
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: Role update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/domain.UpdateUserRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.SuccessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user role
      tags:
      - User Management
  /api/v1/user/permissions:
    get:
      consumes:
      - application/json
      description: Get the permissions of the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.UserPermissionItem'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/domain.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user permissions
      tags:
      - User Profile
  /health:
    get:
      consumes:
      - application/json
      description: Melakukan pemeriksaan dasar kesehatan server. Mengembalikan status
        dasar tanpa pengecekan koneksi database.
      produces:
      - application/json
      responses:
        "200":
          description: Server berjalan dengan baik
          schema:
            allOf:
            - $ref: '#/definitions/domain.SuccessResponse'
            - properties:
                data:
                  $ref: '#/definitions/domain.BasicHealthCheck'
              type: object
      summary: Basic Health Check
      tags:
      - Monitoring
securityDefinitions:
  BearerAuth:
    description: 'JWT Authorization header using the Bearer scheme. Example: "Bearer
      {token}"'
    in: header
    name: Authorization
    type: apiKey
  CookieAuth:
    description: Access token stored in HttpOnly cookie (set automatically on login/register/refresh)
    in: cookie
    name: access_token
    type: apiKey
swagger: "2.0"
