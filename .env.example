# =============================================================================
# Application Configuration
# =============================================================================
APP_ENV=development
APP_NAME=invento
APP_PORT=3000
CORS_ORIGIN_DEVELOPMENT=http://localhost:5173
CORS_ORIGIN_PRODUCTION=https://yourdomain.com

# =============================================================================
# Database Configuration
# =============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password_here
DB_NAME=invento

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=text
LOG_REQUEST_BODY=false

# =============================================================================
# Upload Configuration (TUS Resumable Uploads)
# =============================================================================
# Maximum file sizes (in bytes)
UPLOAD_MAX_SIZE=524288000
UPLOAD_MAX_SIZE_PROJECT=524288000
UPLOAD_MAX_SIZE_MODUL=52428800

# Concurrency settings
UPLOAD_MAX_CONCURRENT=1
UPLOAD_MAX_CONCURRENT_PROJECT=1
UPLOAD_MAX_CONCURRENT_MODUL=1
UPLOAD_MAX_QUEUE_MODUL_PER_USER=5

# Chunk and timeout settings
UPLOAD_CHUNK_SIZE=1048576
UPLOAD_IDLE_TIMEOUT=600
UPLOAD_CLEANUP_INTERVAL=300

# File paths
UPLOAD_PATH_PRODUCTION=/volume1/data-invento/
UPLOAD_PATH_DEVELOPMENT=./uploads/
UPLOAD_TEMP_PATH_PRODUCTION=/volume1/data-invento/temp/
UPLOAD_TEMP_PATH_DEVELOPMENT=./uploads/temp/

# TUS protocol settings
TUS_RESUMABLE_VERSION=1.0.0
TUS_MAX_RESUME_ATTEMPTS=10

# =============================================================================
# Swagger Configuration
# =============================================================================
SWAGGER_ENABLED=true

# =============================================================================
# Go Runtime Memory Configuration
# =============================================================================
# GOMEMLIMIT sets a soft memory limit for the Go runtime garbage collector
# 350MiB leaves ~150MB headroom on a 500MB RAM server
GOMEMLIMIT=350MiB
# GOGC controls GC frequency (100 = default Go, lower = more frequent GC)
GOGC=100

# =============================================================================
# Performance Tuning
# =============================================================================
# Fiber HTTP server settings
FIBER_CONCURRENCY=1024
FIBER_REDUCE_MEMORY_USAGE=false
FIBER_STREAM_REQUEST_BODY=true
FIBER_READ_BUFFER_SIZE=16384

# Database connection pool
DB_MAX_OPEN_CONNS=10
DB_MAX_IDLE_CONNS=3
DB_CONN_MAX_LIFETIME=1800
DB_CONN_MAX_IDLE_TIME=300

# Profiling (disabled by default, enable for debugging)
ENABLE_PPROF=false

# Memory monitoring (threshold as fraction of GOMEMLIMIT, 0.8 = 80%)
MEMORY_WARNING_THRESHOLD=0.8

# =============================================================================
# Supabase Configuration
# =============================================================================
# Get these values from your Supabase project dashboard:
# https://supabase.com/dashboard/project/_/settings/api

# SUPABASE_URL: The base URL of your Supabase project
# Found in: Project Settings > API > Project URL
SUPABASE_URL=https://your-project-id.supabase.co

# SUPABASE_SERVICE_ROLE_KEY: Server-side key with full database access
# WARNING: Keep this secret! Never expose in client-side code.
# Found in: Project Settings > API > service_role (secret)
# Used for: Admin operations, user management, bypassing RLS
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# SUPABASE_ANON_KEY: Public anonymous key for client-side requests
# Found in: Project Settings > API > anon (public)
# Used for: Public API requests, respects Row Level Security (RLS)
SUPABASE_ANON_KEY=your-anon-key-here

# SUPABASE_JWT_SECRET: JWT secret for verifying Supabase auth tokens locally
# Found in: Project Settings > API > JWT Settings > JWT Secret
# Used for: Local JWT token verification (HMAC) without network calls
SUPABASE_JWT_SECRET=your-jwt-secret-here

# SUPABASE_DB_URL: Direct PostgreSQL connection string
# Found in: Project Settings > Database > Connection string > URI
# Format: postgresql://postgres:[PASSWORD]@db.[PROJECT-ID].supabase.co:5432/postgres
# Used for: Direct database connections, migrations
SUPABASE_DB_URL=postgresql://postgres:[YOUR-PASSWORD]@db.your-project-id.supabase.co:5432/postgres
